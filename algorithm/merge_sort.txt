function merge_sort(input, left, right, scratch){
  if(left+1==right){
    return;
  } else {
    var length=right-left
    var midpoint_distance=~~(length/2)
    var l=left, r=left+midpoint_distance
    merge_sort(input, left, left+midpoint_distance, scratch)
    merge_sort(input, left+midpoint_distance, right, scratch)
    for(var i=0; i<length; i++){
      var a = l < left + midpoint_distance
      var b = r == right 
      var c = Math.min(input[l], input[r]) == input[l]
      if(a && (b || c)){
        scratch[i] = input[l]
        l++
      }else{
        scratch[i] = input[r]
        r++
      }
    }
    for(var i=left; i<right; i++){
      input[i]=scratch[i-left]
    }
  }
}
